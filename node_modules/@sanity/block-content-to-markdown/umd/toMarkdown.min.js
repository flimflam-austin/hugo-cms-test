!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SanityBlockContentToMarkdown=e()}}(function(){return function o(a,s,l){function u(t,e){if(!s[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return u(a[t][1][e]||e)},i,i.exports,o,a,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,r){t.exports=e("./lib/toMarkdown")},{"./lib/toMarkdown":3}],2:[function(e,t,r){"use strict";var n=e("@sanity/block-content-to-hyperscript/internals").getImageUrl;function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return Array.isArray(e.children)?e.children.join(t):e.children}function i(e,t){return""+e+o(t)+e}t.exports={types:{block:function(e){var t=e.node.style||"normal";return/^h\d$/.test(t)?new Array(parseInt(t[1],10)+1).join("#")+" "+o(e):"blockquote"===t?"> "+o(e):o(e)},image:function(e){var t=e.title;return"!["+(e.alt||"")+"]("+n(e)+(t?" "+JSON.stringify(t):"")+")"}},marks:{"strike-through":i.bind(null,"~~"),em:i.bind(null,"_"),code:i.bind(null,"`"),strong:i.bind(null,"**"),underline:o,link:function(e){var t=e.mark,r=t.href,n=t.title,i=n?" "+JSON.stringify(n):"";return"["+o(e)+"]("+r+i+")"}},list:function(e){var t=new Array(e.level||1).join("  ");return t+o(e,"\n"+t)},listItem:function(e){return("bullet"===e.node.listItem?"*":e.index+1+".")+" "+o(e)},container:function(e){return o(e,"\n\n")},hardBreak:function(){return"  \n"},markFallback:o}},{"@sanity/block-content-to-hyperscript/internals":4}],3:[function(e,t,r){"use strict";var n=e("@sanity/block-content-to-hyperscript/internals"),i=n.getImageUrl,o=n.getSerializers,a=n.blocksToNodes,s=n.mergeSerializers,l=e("./serializers"),u=function(e,t,r){var n=r||t.node&&t.node.children;return e(Object.assign({},t,{children:n}))},c=o(u),f=c.defaultSerializers,h=c.serializeSpan,p=s(f,l),d=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=e||[],n=s(p,t.serializers||{}),i=Object.assign({},t,{blocks:r,serializers:n,listNestMode:"last-child"});return a(u,i,f,h).trim()};d.defaultSerializers=f,d.getImageUrl=i,t.exports=d},{"./serializers":2,"@sanity/block-content-to-hyperscript/internals":4}],4:[function(e,t,r){t.exports=e("./lib/internals")},{"./lib/internals":9}],5:[function(e,t,r){"use strict";var u=e("object-assign"),I=e("./buildMarksTree"),c=e("./nestLists"),f=e("./generateKeys"),h=e("./mergeSerializers"),p=["projectId","dataset","imageOptions"],d={imageOptions:{}};function S(e){return"block"===e._type&&e.listItem}t.exports=function(w,e,t,O){var n=u({},d,e),r=Array.isArray(n.blocks)?n.blocks:[n.blocks],i=f(r),o=c(i,n.listNestMode),j=h(t,n.serializers||{}),x=p.reduce(function(e,t){var r=n[t];return void 0!==r&&(e[t]=r),e},{}),a=Boolean(n.renderContainerOnSingleChild),s=o.map(function n(e,t,r,i){return"list"===(y=e)._type&&y.listItem?(g=(m=e).listItem,v=m.level,b=m._key,k=m.children.map(n),w(j.list,{key:b,level:v,type:g,options:x},k)):S(e)?(h=function(e,t){for(var r=0,n=0;n<t.length;n++){if(t[n]===e)return r;S(t[n])&&r++}return r}(f=e,r),p=f._key,d=I(f).map(n),w(j.listItem,{node:f,serializers:j,index:h,key:p,options:x},d)):"string"==typeof(c=e)||c.marks||"span"===c._type?O(e,j,t,{serializeNode:n}):(a=t,s=i,l=I(o=e).map(function(e,t,r){return n(e,t,r,!0)}),u={key:o._key||"block-"+a,node:o,isInline:s,serializers:j,options:x},w(j.block,u,l));var o,a,s,l,u,c,f,h,p,d,y,m,g,v,b,k});if(a||1<s.length){var l=n.className?{className:n.className}:{};return w(j.container,l,s)}return s[0]?s[0]:"function"==typeof j.empty?w(j.empty):j.empty}},{"./buildMarksTree":6,"./generateKeys":7,"./mergeSerializers":10,"./nestLists":11,"object-assign":19}],6:[function(e,t,r){"use strict";var s=["strong","em","code","underline","strike-through"];function n(e,i,o){if(!e.marks||0===e.marks.length)return e.marks||[];var t=e.marks.reduce(function(e,t){e[t]=e[t]?e[t]+1:1;for(var r=i+1;r<o.length;r++){var n=o[r];if(!n.marks||!Array.isArray(n.marks)||-1===n.marks.indexOf(t))break;e[t]++}return e},{}),r=function(e,t,r){var n=e[t]||0,i=e[r]||0;if(n!==i)return i-n;var o=s.indexOf(t),a=s.indexOf(r);return o!==a?o-a:t<r?-1:r<t?1:0}.bind(null,t);return e.marks.slice().sort(r)}t.exports=function(e){var t=e.children,c=e.markDefs;if(!t||!t.length)return[];var f=t.map(n),r={_type:"span",children:[]},h=[r];return t.forEach(function(r,e){var t,n=f[e];if(n){var i=1;if(1<h.length)for(;i<h.length;i++){var o=h[i].markKey,a=n.indexOf(o);if(-1===a)break;n.splice(a,1)}var s=function(e){for(var t=e.length-1;0<=t;t--){var r=e[t];if("span"===r._type&&r.children)return r}}(h=h.slice(0,i));if(n.forEach(function(t){var e={_type:"span",_key:r._key,children:[],mark:c.find(function(e){return e._key===t})||t,markKey:t};s.children.push(e),h.push(e),s=e}),"string"!=typeof(t=r).text||!Array.isArray(t.marks)&&void 0!==t.marks)s.children=s.children.concat(r);else{for(var l=r.text.split("\n"),u=l.length;1<u--;)l.splice(u,0,"\n");s.children=s.children.concat(l)}}else h[h.length-1].children.push(r)}),r.children}},{}],7:[function(e,t,r){"use strict";var n=e("object-assign");t.exports=function(e){return e.map(function(e){return e._key?e:n({_key:(t=e,function(e){var t=0,r=e.length;if(0===r)return t;for(var n=0;n<r;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(JSON.stringify(t)).toString(36).replace(/[^A-Za-z0-9]/g,""))},e);var t})}},{"object-assign":19}],8:[function(e,t,r){"use strict";var n=e("@sanity/generate-help-url"),l=e("@sanity/image-url"),u=e("object-assign"),c=encodeURIComponent,f="You must either:\n  - Pass `projectId` and `dataset` to the block renderer\n  - Materialize images to include the `url` field.\n\nFor more information, see "+n("block-content-image-materializing");t.exports=function(e){var t,r,n=e.node,i=e.options,o=i.projectId,a=i.dataset,s=n.asset;if(!s)throw new Error("Image does not have required `asset` property");if(s.url)return s.url+(t=i.imageOptions,(r=Object.keys(t)).length?"?"+r.map(function(e){return c(e)+"="+c(t[e])}).join("&"):"");if(!o||!a)throw new Error(f);if(!s._ref)throw new Error("Invalid image reference in block, no `_ref` found on `asset`");return l(u({projectId:o,dataset:a},i.imageOptions||{})).image(n).toString()}},{"@sanity/generate-help-url":13,"@sanity/image-url":14,"object-assign":19}],9:[function(e,t,r){"use strict";var o=e("./serializers"),a=e("./blocksToNodes"),n=e("./getImageUrl"),i=e("./mergeSerializers");t.exports={blocksToNodes:function(e,t,r,n){if(r)return a(e,t,r,n);var i=o(e);return a(e,t,i.defaultSerializers,i.serializeSpan)},getSerializers:o,getImageUrl:n,mergeSerializers:i}},{"./blocksToNodes":5,"./getImageUrl":8,"./mergeSerializers":10,"./serializers":12}],10:[function(e,t,r){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("object-assign");t.exports=function(n,i){return Object.keys(n).reduce(function(e,t){var r=o(n[t]);return e[t]="function"===r?void 0!==i[t]?i[t]:n[t]:"object"===r?a({},n[t],i[t]):void 0===i[t]?n[t]:i[t],e},{})}},{"object-assign":19}],11:[function(e,t,r){"use strict";var p=e("object-assign");function d(e){return{_type:"list",_key:e._key+"-parent",level:e.level,listItem:e.listItem,children:[e]}}function y(e){return e.children&&e.children[e.children.length-1]}function m(e,t){var r="string"==typeof t.listItem;if("list"===e._type&&e.level===t.level&&r&&e.listItem===t.listItem)return e;var n=y(e);return!!n&&m(n,t)}t.exports=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"html",r=[],n=void 0,i=0;i<e.length;i++){var o=e[i];if(Boolean(o.listItem))if(n)if(h=n,(f=o).level===h.level&&f.listItem===h.listItem)n.children.push(o);else if(o.level>n.level){var a=d(o);if("html"===t){var s=y(n),l=p({},s,{children:s.children.concat(a)});n.children[n.children.length-1]=l}else n.children.push(a);n=a}else if(o.level<n.level){var u=m(r[r.length-1],o);if(u){(n=u).children.push(o);continue}n=d(o),r.push(n)}else if(o.listItem===n.listItem)console.warn("Unknown state encountered for block",o),r.push(o);else{var c=m(r[r.length-1],{level:o.level});if(c&&c.listItem===o.listItem){(n=c).children.push(o);continue}n=d(o),r.push(n)}else n=d(o),r.push(n);else r.push(o),n=null}var f,h;return r}},{"object-assign":19}],12:[function(e,t,r){"use strict";var a=e("object-assign"),n=e("./getImageUrl");t.exports=function(l,e){var r=e||{useDashedStyles:!1};function t(e,t){return l(e,null,t.children)}return{defaultSerializers:{types:{block:function(e){var t=e.node.style||"normal";return/^h\d/.test(t)?l(t,null,e.children):l("blockquote"===t?"blockquote":"p",null,e.children)},image:function(e){var t=l("img",{src:n(e)});return e.isInline?t:l("figure",null,t)}},marks:{strong:t.bind(null,"strong"),em:t.bind(null,"em"),code:t.bind(null,"code"),underline:function(e){var t=r.useDashedStyles?{"text-decoration":"underline"}:{textDecoration:"underline"};return l("span",{style:t},e.children)},"strike-through":function(e){return l("del",null,e.children)},link:function(e){return l("a",{href:e.mark.href},e.children)}},list:function(e){var t="bullet"===e.type?"ul":"ol";return l(t,null,e.children)},listItem:function(e){var t=e.node.style&&"normal"!==e.node.style?l(e.serializers.types.block,e,e.children):e.children;return l("li",null,t)},block:function(e){var t=e.node,r=e.serializers,n=e.options,i=e.isInline,o=e.children,a=t._type,s=r.types[a];if(!s)throw new Error('Unknown block type "'+a+'", please specify a serializer for it in the `serializers.types` prop');return l(s,{node:t,options:n,isInline:i},o)},span:function(e){var t=e.node,r=t.mark,n=t.children,i="string"==typeof r?r:r._type,o=e.serializers.marks[i];return o?l(o,e.node,n):(console.warn('Unknown mark type "'+i+'", please specify a serializer for it in the `serializers.marks` prop'),l(e.serializers.markFallback,null,n))},hardBreak:function(){return l("br")},container:"div",markFallback:"span",text:void 0,empty:""},serializeSpan:function(r,e,t,n){if("\n"===r&&e.hardBreak)return l(e.hardBreak,{key:"hb-"+t});if("string"==typeof r)return e.text?l(e.text,{key:"text-"+t},r):r;var i=void 0;r.children&&(i={children:r.children.map(function(e,t){return n.serializeNode(e,t,r.children,!0)})});var o=a({},r,i);return l(e.span,{key:r._key||"span-"+t,node:o,serializers:e})}}}},{"./getImageUrl":8,"object-assign":19}],13:[function(e,t,r){t.exports=function(e){return"https://docs.sanity.io/help/"+e}},{}],14:[function(e,t,r){t.exports=e("./lib/builder").default},{"./lib/builder":15}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();r.default=function(e){return e&&"object"===n(e.clientConfig)?new c(null,{baseUrl:e.clientConfig.apiHost.replace(/^https:\/\/api\./,"https://cdn."),projectId:e.clientConfig.projectId,dataset:e.clientConfig.dataset}):new c(null,e)};var o,a=e("./urlForImage"),s=(o=a)&&o.__esModule?o:{default:o};var l=["clip","crop","fill","fillmax","max","scale","min"],u=["top","bottom","left","right","center","focalpoint","entropy"],c=function(){function r(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),this.options=e?Object.assign({},e.options,t||{}):t||{}}return i(r,[{key:"withOptions",value:function(e){return new r(this,e)}},{key:"image",value:function(e){return this.withOptions({source:e})}},{key:"dataset",value:function(e){return this.withOptions({dataset:e})}},{key:"projectId",value:function(e){return this.withOptions({projectId:e})}},{key:"width",value:function(e){return this.withOptions({width:e})}},{key:"height",value:function(e){return this.withOptions({height:e})}},{key:"focalPoint",value:function(e,t){return this.withOptions({focalPoint:{x:e,y:t}})}},{key:"maxWidth",value:function(e){return this.withOptions({maxWidth:e})}},{key:"minWidth",value:function(e){return this.withOptions({minWidth:e})}},{key:"maxHeight",value:function(e){return this.withOptions({maxHeight:e})}},{key:"minHeight",value:function(e){return this.withOptions({minHeight:e})}},{key:"size",value:function(e,t){return this.withOptions({width:e,height:t})}},{key:"blur",value:function(e){return this.withOptions({blur:e})}},{key:"sharpen",value:function(e){return this.withOptions({sharpen:e})}},{key:"rect",value:function(e,t,r,n){return this.withOptions({rect:{left:e,top:t,width:r,height:n}})}},{key:"format",value:function(e){return this.withOptions({format:e})}},{key:"invert",value:function(e){return this.withOptions({invert:e})}},{key:"orientation",value:function(e){return this.withOptions({orientation:e})}},{key:"quality",value:function(e){return this.withOptions({quality:e})}},{key:"forceDownload",value:function(e){return this.withOptions({download:e})}},{key:"flipHorizontal",value:function(){return this.withOptions({flipHorizontal:!0})}},{key:"flipVertical",value:function(){return this.withOptions({flipVertical:!0})}},{key:"ignoreImageParams",value:function(){return this.withOptions({ignoreImageParams:!0})}},{key:"fit",value:function(e){if(-1===l.indexOf(e))throw new Error('Invalid fit mode "'+e+'"');return this.withOptions({fit:e})}},{key:"crop",value:function(e){if(-1===u.indexOf(e))throw new Error('Invalid crop mode "'+e+'"');return this.withOptions({crop:e})}},{key:"url",value:function(){return(0,s.default)(this.options)}},{key:"toString",value:function(){return this.url()}}]),r}()},{"./urlForImage":18}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.default=function(e){var t=e.split("-"),r=c(t,4),n=r[1],i=r[2],o=r[3];if(!n||!i||!o)throw new Error("Malformed asset _ref '"+e+"'. Expected an id like \""+f+'".');var a=i.split("x"),s=c(a,2),l=+s[0],u=+s[1];if(!Number.isFinite(l)||!Number.isFinite(u))throw new Error("Malformed asset _ref '"+e+"'. Expected an id like \""+f+'".');return{id:n,width:l,height:u,format:o}};var f="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg"},{}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){return("image-"+e.split("/").slice(-1)[0]).replace(/\.([a-z]+)$/,"-$1")}r.default=function(e){if(!e)return null;var t,r=void 0;if("string"==typeof e&&/^https?:\/\//.test(""+e))r={asset:{_ref:i(e)}};else if("string"==typeof e)r={asset:{_ref:e}};else if("string"==typeof e._ref)r={asset:e};else if(e._id)r={asset:{_ref:e._id}};else if(e.asset&&e.asset.url&&!e.asset._ref)r={asset:{_ref:i(e.asset.url)}};else{if("object"!==n(e.asset))return null;r=e}return e.crop&&(r.crop=e.crop),e.hotspot&&(r.hotspot=e.hotspot),(t=r).crop&&t.hotspot?t:Object.assign({crop:{left:0,top:0,bottom:0,right:0},hotspot:{x:.5,y:.5,height:1,width:1}},t)}},{}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseSource=void 0;var m=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.default=function(e){var t=Object.assign({},e||{}),r=t.source;delete t.source;var n=(0,g.default)(r);if(!n)return null;var i=(0,v.default)(n.asset._ref),o={left:Math.round(n.crop.left*i.width),top:Math.round(n.crop.top*i.height)};o.width=Math.round(i.width-n.crop.right*i.width-o.left),o.height=Math.round(i.height-n.crop.bottom*i.height-o.top);var a=n.hotspot.height*i.height/2,s=n.hotspot.width*i.width/2,l=n.hotspot.x*i.width,u=n.hotspot.y*i.height,c={left:l-s,top:u-a,right:l+s,bottom:u+s};return t.asset=i,t.rect||t.focalPoint||t.ignoreImageParams||t.crop||(t=Object.assign(t,function(e,t){var r={width:t.width,height:t.height};if(!t.width||!t.height)return r.rect=e.crop,r;var n=e.crop,i=e.hotspot,o=t.width/t.height;if(n.width/n.height>o){var a=n.height,s=a*o,l=n.top,u=(i.right-i.left)/2+i.left-s/2;return u<n.left?u=n.left:u+s>n.left+n.width&&(u=n.left+n.width-s),r.rect={left:Math.round(u),top:Math.round(l),width:Math.round(s),height:Math.round(a)},r}var c=n.width,f=c/o,h=n.left,p=(i.bottom-i.top)/2+i.top-f/2;return p<n.top?p=n.top:p+f>n.top+n.height&&(p=n.top+n.height-f),r.rect={left:Math.floor(h),top:Math.floor(p),width:Math.round(c),height:Math.round(f)},r}({crop:o,hotspot:c},t))),f=t,h=f.baseUrl||"https://cdn.sanity.io",p=f.asset.id+"-"+f.asset.width+"x"+f.asset.height+"."+f.asset.format,d=h+"/images/"+f.projectId+"/"+f.dataset+"/"+p,y=[],f.rect&&(0!=f.rect.left||0!=f.rect.top||f.rect.height!=f.asset.height||f.rect.width!=f.asset.width)&&y.push("rect="+f.rect.left+","+f.rect.top+","+f.rect.width+","+f.rect.height),f.focalPoint&&(y.push("fp-x="+f.focalPoint.x),y.push("fp-x="+f.focalPoint.y)),(f.flipHorizontal||f.flipVertical)&&y.push("flip="+(f.flipHorizontal?"h":"")+(f.flipVertical?"v":"")),b.forEach(function(e){var t=m(e,2),r=t[0],n=t[1];void 0!==f[r]?y.push(n+"="+encodeURIComponent(f[r])):void 0!==f[n]&&y.push(n+"="+encodeURIComponent(f[n]))}),0===y.length?d:d+"?"+y.join("&");var f,h,p,d,y};var g=n(e("./parseSource")),v=n(e("./parseAssetId"));function n(e){return e&&e.__esModule?e:{default:e}}var b=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"]];r.parseSource=g.default},{"./parseAssetId":16,"./parseSource":17}],19:[function(e,t,r){"use strict";var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var a in r=Object(arguments[o]))u.call(r,a)&&(i[a]=r[a]);if(l){n=l(r);for(var s=0;s<n.length;s++)c.call(r,n[s])&&(i[n[s]]=r[n[s]])}}return i}},{}]},{},[1])(1)});
